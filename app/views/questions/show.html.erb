<%= provide :page_title, 'Show Question' %>
<%= currently_at 'Questions' %>

<div class='mb-6 w-1/2'>
  <h1 class='text-white bg-gradient-to-br from-purple-600 to-blue-500 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-lg px-5 py-2.5 text-center mb-2'>
    Show Question
  </h1>

  <div class="p-6 bg-white border border-gray-200 rounded-lg shadow mt-8">
    <h5 class="mb-5 text-2xl font-bold text-center tracking-tight text-gray-900"><%= @question.title %></h5>
    <div class="mb-3 font-normal text-gray-700 dark:text-gray-400"><%= sanitize(@question.body) %></div>
    <div class="inline-flex rounded-md shadow-sm" role="group">
      <%= link_to 'Edit', edit_question_path(@question),
                  class: 'text-sm px-4 py-2 focus:outline-none text-white rounded-l-lg bg-yellow-400 hover:bg-yellow-500 focus:ring-4 focus:ring-yellow-300 font-medium' %>
      <%= link_to 'Delete', question_path(@question), method: :delete, data: {
        turbo_method: :delete,
        turbo_confirm: "Are you sure?"
      }, class: 'text-sm px-4 py-2 focus:outline-none text-white rounded-r-lg bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium' %>
    </div>

    <div class="flex items-center mt-2 text-gray-500 text-xs">
      <%= @question.user.gravatar %>
      <p class="italic font-extrabold ml-2">
        Author: <span class='font-normal'><%= @question.user.name_or_email %></span>
      </p>
    </div>

    <section class="bg-white dark:bg-gray-900 py-2 lg:py-2 antialiased">
      <div class="max-w-2xl mx-auto px-4">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-lg lg:text-2xl font-bold text-gray-900">Comments (<%= @commentable.comments.size%>)</h2>
        </div>

        <%= render('shared/errors', object: @comment) %>
        <%= form_with model: [@commentable, @comment], data: { turbo: false } do |f| %>
              <div class="py-2 px-4 mb-4 bg-white rounded-lg rounded-t-lg border border-gray-200">
                  <%= f.text_area :body, rows: 2, id: 'comment', class: 'px-0 w-full text-sm text-gray-900 border-0 focus:ring-0 focus:outline-none', placeholder: 'Write a comment...', required: true %>
              </div>
            <%= f.submit 'Post comment', class: 'cursor-pointer inline-flex items-center py-2.5 px-4 text-xs font-medium text-center text-white bg-blue-700 rounded-lg focus:ring-4 focus:ring-blue-200' %>
        <% end %>

        <%= render partial: 'comments/comment', collection: @comments %>
      </div>
    </section>

    <div class="inline-flex items-center justify-center w-full">
      <hr class="w-64 h-1 my-8 bg-gray-200 border-0 rounded">
      <div class="absolute px-4 -translate-x-1/2 bg-white left-1/2">
        <svg class="w-4 h-4 text-gray-700 dark:text-gray-300" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 14">
          <path d="M6 0H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h4v1a3 3 0 0 1-3 3H2a1 1 0 0 0 0 2h1a5.006 5.006 0 0 0 5-5V2a2 2 0 0 0-2-2Zm10 0h-4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h4v1a3 3 0 0 1-3 3h-1a1 1 0 0 0 0 2h1a5.006 5.006 0 0 0 5-5V2a2 2 0 0 0-2-2Z"/>
        </svg>
      </div>
    </div>

    <%= render partial: 'answers/answer', collection: @answers, locals: { question: @question } %>

    <div>
      <%= pagination(@pagy) %>
    </div>
  
    <%= render('shared/errors', object: @answer) %>

    <div class='my-4'>
      <%= render 'answers/form' %>
    </div>
  </div>
</div>

